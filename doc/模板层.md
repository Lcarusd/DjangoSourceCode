# 模板层
## 基础
### 概览
#### 模板
Django 项目可以配置一个或多个模板引擎(甚至是零,如果你不需要使用模板)。
#### 模板引擎的支持
##### 配置￼
￼TEMPLATES = [
	￼{￼		'BACKEND': 'django.template.backends.django.DjangoTemplates',
		￼'DIRS': [],￼		'APP_DIRS': True,		￼'OPTIONS': {
			'''一些操作...'''
		}￼	},
]
BACKEND 是一个指向实现了Django模板后端API的模板引擎类的带点的Python路径。
DIRS 定义了一个目录列表,模板引擎按列表顺序搜索这些目录以查找模板源文件。APP_DIRS 告诉模板引擎是否应该进入每个已安装的应用中查找模板。每种模板引擎后端都定义了一个惯用的名称作为应用内部存放模板的子目录名称。OPTIONS 中包含了具体的backend设置
##### 用法
django.template.loader 定义了两个函数以加载模板。
get_template (template_name[, dirs][, using])[source]该函数使用给定的名称加载模板并返回一个 Template 对象.
select_template (template_name_list[, dirs][, using])[source] select_template() 和 get_template() 很相似, 只不过它用了一个模板名称的列表作为参数。按顺序搜索模板名称列表内的模板并返回第一个存在的模板。
Template.``render (context=None, request=None) 通过给定的 context 对该模板进行渲染。
如果提供了 context ,那么它必须是一个 dict 对象. 如果没有提供,引擎将是 用空 context 对模板进行渲染。如果要提供 request 参数 ,必须使用 HttpRequest 对象. 之后模板引擎会使它 连同CSRF token一起在模板中可用.具体如何实现由相应模板后端决定.render_to_string (template_name[, context][, context_instance][, request][, using])[source]render_to_string() 会像 get_template() 一样加载模板并立即调用 render() 方法。 它需要以下参数。context要用作模板的上下文进行渲染的 dict 。
##### 内置(模板)后端
class DjangoTemplates [source]

DjangoTemplates 引擎 OPTIONS 配置项中接受以下参数:'allowed_include_roots' : 这是一个字符串列表,表示这些字符串允许出 现在 {% ssi %} 中,作为被允许使用的模板标签。
'context_processors' : 是一个包含以"."为分隔符的python调用路径的列 表,在一个template被request渲染时,它可以被调用以产生context的数据。默认为空列表。

'debug' :打开/关闭模板调试模式的布尔值。

'loaders' :模板加载器类的虚拟Python路径列表。每
'string_if_invalid' :作为字符串的输出,它默认为空字符串。

'file_charset' :用于读取磁盘上的模板文件的字符集。 它默认为 FILE_CHARSET 的值。

##### 定制后端
模板后台都 是继承自 django.template.backends.base.BaseEngine 类的。它必须实现get_template() 方法,也可实现可选函数 from_string() 。
#### Django模板语言
##### 语法
Django模板是一个简单的文本文档,或用Django模板语言标记的一个Python字符 串。 某些结构是被模板引擎解释和识别的。主要的有变量和标签。模板是由context来进行渲染的。渲染的过程是用在context中找到的值来替换模板 中相应的变量,并执行相关tags。其他的一切都原样输出。Django模板语言的语法包括四个结构。
1. **变量**
变量的值是来自context中的输出, 这类似于字典对象的keys到values的映射关系。 变量是被 {{ 和 }} 括起来的部分,例如:My first name is {{ first_name }}.
字典查询,属性查询和列表索引查找都是通过一个点符号来实现:  {{ my_dict.key }}  {{ my_object.attribute }}  {{ my_list.0 }}
如果一个变量被解析为一个可调用的,模板系统会调用它不带任何参数,并使用调用它的结果来代替这个可调用对象本身.
2. **标签**
一个标签可以输出内容,作为控制结构,例如“if”语 句或“for”循环从数据库中提取内容,甚至可以访问其他的模板标签。

Tags是由 {% 和 %} 来定义的,例如: {% csrf_token %}

大部分标签都接受参数{%< cycle 'odd' 'even' %}
部分标签要求使用起始和闭合标签:  {%< if user.is_authenticated %}Hello, {{ user.username }}.{%< en  dif %}
3. **过滤器**
4. **注释**
##### 组件
1. **引擎**
2. **模板**
3. **上下文**
4. **加载器**
5. **上下文处理器**

## 面向设计师
### 语言概览
### 内建标签和过滤器
### 人性化
## 面向程序员
### 模板API
### 自定义标签和过滤器
